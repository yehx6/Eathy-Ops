# Eathy Ops (å°çº¢ä¹¦æ™ºèƒ½è¿è¥ç³»ç»Ÿ)

Eathy Ops æ˜¯ä¸€ä¸ªå…¨è‡ªåŠ¨åŒ–çš„**å°çº¢ä¹¦å†…å®¹ç”Ÿäº§ä¸å‘å¸ƒæµæ°´çº¿**ï¼Œä¸“ä¸º Eathy App çš„å†…å®¹è¥é”€è®¾è®¡ã€‚å®ƒèƒ½è‡ªåŠ¨ä»å…¨çƒ RSS æºä¸ NewsAPI é‡‡é›†æœ€æ–°èµ„è®¯ï¼Œç»è¿‡ AI ç­›é€‰ã€é£æ ¼å†³ç­–ã€æ–‡æ¡ˆåˆ›ä½œä¸é…å›¾ç”Ÿæˆï¼Œæœ€ç»ˆè‡ªåŠ¨å‘å¸ƒåˆ°å°çº¢ä¹¦ã€‚

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

- **å…¨è‡ªåŠ¨é‡‡é›†**: ç›‘æ§ FDAã€Healthlineã€EWG ç­‰æƒå¨æ•°æ®æºã€‚
- **AI æ™ºèƒ½é€‰å“**: ä½¿ç”¨å¤§æ¨¡å‹ç­›é€‰ç¬¦åˆè´¦å·äººè®¾ï¼ˆ"æˆåˆ†æ­ç§˜"ã€"é¿é›·æŒ‡å—"ï¼‰çš„é«˜ä»·å€¼èµ„è®¯ã€‚
- **ğŸ§  AI é£æ ¼å†³ç­– (æ–°)**:
  - æ ¹æ®æ–‡ç« å†…å®¹ä¸æƒ…æ„Ÿè‰²å½©ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€åŒ¹é…çš„**æ–‡æ¡ˆé£æ ¼**ï¼ˆå¦‚â€œæƒ…ç»ªæ•…äº‹â€ã€â€œç¡¬æ ¸ç§‘æ™®â€ï¼‰ä¸**é…å›¾é£æ ¼**ï¼ˆå¦‚â€œè­¦ç¤ºé¿é›·â€ã€â€œæç®€å›¾è¡¨â€ï¼‰ã€‚
  - æ”¯æŒå¤šå¥—äººè®¾ç­–ç•¥ï¼Œé…ç½®çµæ´»ã€‚
- **å¤šæ¨¡æ€ç”Ÿæˆ**:
  - **æ–‡æ¡ˆ**: è‡ªåŠ¨ç”Ÿæˆçˆ†æ¬¾æ ‡é¢˜ã€æ­£æ–‡åŠæ ‡ç­¾ï¼ˆMiniMax M2.5 / DeepSeek ç­‰ OpenAI å…¼å®¹æ¨¡å‹ï¼‰ã€‚
  - **é…å›¾**: ç”Ÿæˆé«˜è´¨é‡ã€ç¬¦åˆå°çº¢ä¹¦å®¡ç¾çš„ç«–ç‰ˆé…å›¾ï¼ˆGemini 3 Pro Image Previewï¼‰ã€‚
- **æ™ºèƒ½è°ƒåº¦**:
  - åå°å®ˆæŠ¤è¿›ç¨‹ï¼Œæ¯å¤©å®šæ—¶ï¼ˆ08:00, 12:00, 20:00ï¼‰å‘å¸ƒã€‚
  - æ”¯æŒéšæœºæŠ–åŠ¨ (Â±30åˆ†é’Ÿ)ï¼Œæ¨¡æ‹ŸçœŸäººæ“ä½œã€‚
- **è‡ªåŠ¨å‘å¸ƒ**: é€šè¿‡ MCP æœåŠ¡ç›´æ¥å‘å¸ƒç¬”è®°åˆ°å°çº¢ä¹¦ Appã€‚

## ğŸ› ï¸ æ¶æ„æ¦‚è§ˆ

```mermaid
graph TD
    A[RSS/NewsAPI] -->|é‡‡é›†| B(å†…å®¹èšåˆæ± )
    B -->|AI ç­›é€‰| C{ArticleSelector}
    C -->|é€‰ä¸­æ–‡ç« | D[StyleManager]
    D -->|AI å†³ç­–| E[æ–‡æ¡ˆé£æ ¼: æƒ…ç»ªæ•…äº‹]
    D -->|AI å†³ç­–| F[é…å›¾é£æ ¼: è­¦ç¤ºçº¢é»‘]
    E -->|ç”Ÿæˆ| G[MiniMax æ–‡æ¡ˆ]
    F -->|ç”Ÿæˆ| H[Gemini é…å›¾]
    G & H -->|å‘å¸ƒ| I["å°çº¢ä¹¦å‘å¸ƒå™¨ (MCP)"]
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£… Python 3.10+ å’Œ Node.js (ç”¨äº MCP æœåŠ¡)ã€‚

```bash
# å…‹éš†é¡¹ç›®
git clone ...
cd eathy-xhs

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
python -m venv .venv
source .venv/bin/activate
pip install -e .
```

### 2. é…ç½®

å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶ï¼š

```bash
cp .env.example .env
# ç¼–è¾‘ .env å¡«å…¥ API Keys (MINIMAX_API_KEY, IMAGEN_API_KEY, NEWS_API_KEY)
```

æ£€æŸ¥ `config.yaml`ï¼ˆé»˜è®¤å·²é…ç½®å¥½ï¼‰ï¼š
- `minimax.api_type`: AI æ¥å£ç±»å‹ï¼Œ`anthropic`ï¼ˆé»˜è®¤ï¼‰æˆ– `openai`ï¼ˆOpenAI å…¼å®¹æ¥å£ï¼‰ã€‚
- `prompts`: æŒ‡å‘æç¤ºè¯åº“è·¯å¾„ã€‚
- `schedule`: è®¾ç½®å‘å¸ƒæ—¶é—´ã€‚

**åˆ‡æ¢ AI Providerï¼š**

é»˜è®¤ä½¿ç”¨ MiniMax Anthropic å…¼å®¹æ¥å£ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚å¦‚éœ€åˆ‡æ¢åˆ° OpenAI å…¼å®¹æ¥å£ï¼ˆå¦‚ DeepSeekï¼‰ï¼Œä¿®æ”¹ `config.yaml`ï¼š

```yaml
minimax:
  api_type: openai
  api_key: ${AI_API_KEY}
  model: deepseek-chat
  base_url: https://api.deepseek.com
```

### 3. è¿è¡Œ

**å•æ¬¡æ‰‹åŠ¨è¿è¡Œï¼š**
```bash
eathy run
# æˆ– dry-run æ¨¡å¼ï¼ˆä¸å‘å¸ƒï¼‰
eathy run --dry-run
```

**å¯åŠ¨è‡ªåŠ¨è°ƒåº¦ï¼ˆå®ˆæŠ¤è¿›ç¨‹ï¼‰ï¼š**
```bash
# æ–¹å¼ä¸€ï¼šåœ¨å‰å°è¿è¡Œè°ƒåº¦å™¨
eathy schedule

# æ–¹å¼äºŒï¼šå®‰è£…ä¸º macOS ç³»ç»ŸæœåŠ¡ï¼ˆæ¨èï¼‰
./scripts/install.sh
# æœåŠ¡å°†å¼€æœºè‡ªå¯ï¼Œåå°é™é»˜è¿è¡Œ
```

## ğŸ¨ é£æ ¼åº“é…ç½® (Prompts)

æœ¬ç³»ç»Ÿé‡‡ç”¨**é…ç½®é©±åŠ¨**çš„æç¤ºè¯ç®¡ç†ã€‚æ‰€æœ‰é£æ ¼å‡åœ¨ `prompts/` ç›®å½•ä¸‹å®šä¹‰ï¼Œæ— éœ€ä¿®æ”¹ä»£ç å³å¯æ–°å¢ç­–ç•¥ã€‚

- **`prompts/filter/default.yaml`**: å®šä¹‰é€‰å“æ ‡å‡†å’Œè´¦å·äººè®¾ã€‚
- **`prompts/copywrite/styles.yaml`**: å®šä¹‰æ–‡æ¡ˆé£æ ¼åº“ã€‚
  - *ç¤ºä¾‹é£æ ¼*: `emotional_story` (æƒ…ç»ªæ•…äº‹), `hardcore_analysis` (ç¡¬æ ¸ç§‘æ™®), `default_viral` (æ ‡å‡†çˆ†æ¬¾)ã€‚
- **`prompts/image/styles.yaml`**: å®šä¹‰é…å›¾é£æ ¼åº“ã€‚
  - *ç¤ºä¾‹é£æ ¼*: `food_warning` (é£Ÿå“é¿é›·), `ingredient_analysis` (æˆåˆ†åˆ†æ), `brand_teardown` (å“ç‰Œæ‹†è§£)ã€‚

è¦æ·»åŠ æ–°é£æ ¼ï¼Œåªéœ€åœ¨å¯¹åº”çš„ YAML æ–‡ä»¶ä¸­è¿½åŠ æ–°çš„ `id` å’Œ `prompt` æè¿°å³å¯ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ config.yaml          # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ prompts/             # æç¤ºè¯åº“
â”‚   â”œâ”€â”€ filter/
â”‚   â”œâ”€â”€ copywrite/
â”‚   â””â”€â”€ image/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ eathy/
â”‚       â”œâ”€â”€ scheduler.py # è°ƒåº¦å™¨æ ¸å¿ƒ
â”‚       â”œâ”€â”€ pipeline.py  # ä»»åŠ¡æµæ°´çº¿
â”‚       â”œâ”€â”€ prompts.py   # é£æ ¼ç®¡ç†å™¨
â”‚       â”œâ”€â”€ providers/
â”‚       â”‚   â”œâ”€â”€ base.py          # AIProvider Protocol
â”‚       â”‚   â”œâ”€â”€ minimax.py       # MiniMax (Anthropic å…¼å®¹)
â”‚       â”‚   â”œâ”€â”€ openai_compat.py # OpenAI å…¼å®¹ Provider
â”‚       â”‚   â””â”€â”€ claude.py        # Claude Provider
â”‚       â””â”€â”€ ...
â”œâ”€â”€ scripts/             # å®‰è£…è„šæœ¬
â””â”€â”€ launchd/             # macOS æœåŠ¡é…ç½®
```

## ğŸ“‹ å¸¸è§å‘½ä»¤

- `eathy run`: æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡æµæ°´çº¿ã€‚
- `eathy schedule`: å¯åŠ¨è°ƒåº¦å™¨ã€‚
- `eathy history`: æŸ¥çœ‹å‘å¸ƒå†å²ã€‚
- `./scripts/uninstall.sh`: å¸è½½åå°æœåŠ¡ã€‚

## ğŸ“ å¼€å‘æŒ‡å—

- **æ·»åŠ æ–°æ¨¡å‹**: åœ¨ `src/eathy/providers/` æ–°å¢ Provider ç±»ï¼Œå®ç° `generate(prompt, system) -> str` æ–¹æ³•å³å¯ã€‚
- **ä¿®æ”¹å‘å¸ƒé€»è¾‘**: ä¿®æ”¹ `src/eathy/publish/xhs.py`ã€‚
- **è¿è¡Œæµ‹è¯•**: `pytest`ã€‚
